<!DOCTYPE html>
<html ng-app="dragList">
<head>
    <script type="text/javascript" src="node_modules/angular/angular.min.js"></script>
    <script type="text/javascript" src="node_modules/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="node_modules/jquery-mousewheel/jquery.mousewheel.js"></script>
    <script type="text/javascript" src="app.js"></script>
    <link rel="stylesheet" href="styles.css">
    <script>
     // todo move in controller, just to test behavior
        function allowDrop(ev) {
            ev.stopPropagation();
            ev.preventDefault();
            console.log('dragover');
        }

        function drag(ev) {
            console.log('dragstart ' + ev.target.id);
            ev.dataTransfer.setData("text", ev.target.id);
        }

        function leave(ev) {
            ev.stopPropagation();
            ev.preventDefault();
            console.log('leave');
        }

        function drop(ev) {
            event.preventDefault();  
            event.stopPropagation();
            var data = ev.dataTransfer.getData("text");
        }
        </script>
    </script>
</head>
<body ng-controller="HomeController as home">
<div>{{home.error}}</div>

    <div class="listContainer">
        <div ng-repeat="list in home.lists" class="list"  >
            <span class="listTitle">{{list.name}}</span>
            <div id="users">
                <ul ondragover="allowDrop(event)" ondragleave="leave(event)" ondrop="drop(event)" ng-attr-id="{{list.id}}">
                    <li draggable="true" ondragstart="drag(event)" ng-attr-id="{{user.id}}" ng-repeat="user in list.users">{{user.name}}</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>

